---
import Button from "../Button.astro";
import type { ButtonProps } from "../../types/directus";

interface ContactProps {
  id: string;
  item: {
    title: string;
    description: string;
    image_mobile: {
      id: string;
      description: string;
    };
    image_desktop: {
      id: string;
      description: string;
    };
    button: ButtonProps[];
  };
}

const {
  item: { title, description, image_mobile, image_desktop, button },
} = Astro.props as ContactProps;

const DIRECTUS_BASE = import.meta.env.DEV
  ? "/directus"
  : import.meta.env.PUBLIC_DIRECTUS_URL;
---

<section>
  <div class="banner-wrapper">
    <picture>
      <source
        media="(min-width: 768px)"
        srcset={`${DIRECTUS_BASE}/assets/${image_desktop.id}?width=1600&format=webp`}
        type="image/webp"
      />

      <img
        srcset={`${DIRECTUS_BASE}/assets/${image_mobile.id}?width=992&format=webp`}
        alt={image_mobile.description}
        loading="lazy"
        class="contact-banner-img"
      />
    </picture>
    <svg
      class="spike"
      width="1440"
      height="40"
      viewBox="0 0 1440 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      aria-hidden="true"
      preserveAspectRatio="none"
    >
      <path
        d="M1440 40H0V0H1040C1079.96 0 1110.86 11.0892 1140 34C1169.14 11.0892 1200.04 0 1240 0H1440V40Z"
        fill="white"></path>
    </svg>
  </div>

  <div class="container">
    <h2>{title}</h2>
    <div class="content" set:html={description} />
    <Button
      variant={button[0].item.variant}
      iconPosition="right"
      iconName="right"
      href={button[0].item.href}>{button[0].item.label}</Button
    >
  </div>
</section>

<style lang="scss">
  @use "../../styles/abstracts";

  section {
    padding-top: abstracts.rem(30px);
    padding-bottom: abstracts.rem(60px);

    .banner-wrapper {
      position: relative;
    }

    .spike {
      position: absolute;
      bottom: 0;
      display: block;
      width: 100%;
      height: 15px;
    }

    .contact-banner-img {
      height: abstracts.rem(280px);
      display: block;
      width: 100%;
      object-fit: cover;
    }

    .container {
      margin-top: abstracts.rem(30px);
    }

    h2 {
      margin: 0 0 abstracts.rem(16px);
    }

    .ui-btn {
      max-width: abstracts.rem(320px);
      width: 100%;
      margin-block: abstracts.rem(16px);
    }
  }

  @include abstracts.respond-above(md) {
    section {
      .spike {
        height: 30px;
      }

      .ui-btn {
        max-width: abstracts.rem(290px);
      }
    }
  }

  @include abstracts.respond-above(lg) {
    section {
      padding-bottom: abstracts.rem(120px);

      .spike {
        height: 35px;
      }

      .contact-banner-img {
        height: abstracts.rem(460px);
        max-width: abstracts.rem(1440px);
        margin: auto;
      }
    }
  }

  @include abstracts.respond-above(xl) {
    section {
      .spike {
        height: 40px;
      }
    }
  }
</style>
